import{f as s}from"./index-9e7089d6.js";const u={apiKey:"AIzaSyB-5AQuNAyFOkiswfOfdsVPQQmK1lGdPrE",authDomain:"live-streaming-caa97.firebaseapp.com",projectId:"live-streaming-caa97",storageBucket:"live-streaming-caa97.appspot.com",messagingSenderId:"584327862946",appId:"1:584327862946:web:07b77f791c6e3d8fe855fb",measurementId:"G-ZZFE0N8W8Y"};s.apps.length||s.initializeApp(u);const w=s.firestore(),g={iceServers:[{urls:["stun:stun1.1.google.com.19302","stun:stun2.1.google.com.19302"]}],iceCandidatePoolSize:10};let a=new RTCPeerConnection(g),i=null;document.querySelector("#answerButton").onclick=async()=>{const o=document.querySelector("#callInput").value,e=w.collection("calls").doc(o),d=e.collection("offerCandidates"),l=e.collection("answerCandidates");a.onicecandidate=t=>{t.candidate&&l.add(t.cadidate.toJSON())};const r=(await e.get()).data();console.log(r.offer);const p=r.offer;await a.setRemoteDescription(new RTCSessionDescription(p));const c=await a.createAnswer();await a.setLocalDescription(c);const f={type:c.type,sdp:c.sdp};await e.update({answer:f}),d.onSnapshot(t=>{t.docChanges().forEach(n=>{if(console.log(n),n.type==="added"){let m=n.doc.data();a.addIceCandidate(new RTCIceCandidate(m))}})})};i=new MediaStream;a.ontrack=o=>{o.streams[0].getTracks().forEach(e=>{i.addTrack(e)})};remoteVideo.srcObject=i;
